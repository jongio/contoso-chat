# yaml-language-server: $schema=https://raw.githubusercontent.com/Azure/azure-dev/main/schemas/v1.0/azure.yaml.json

name: contoso-chat
metadata:
  template: contoso-chat@0.0.1-beta
services:
  chat-flow:
    host: ai.flow
    project: ./contoso-chat
    config:
      name: wb-custom-flow
      workspace: wabrez-workspace
      environments:
        - name: wabrez-custom-env
          path: ../deployment/docker/environment.yml
      models:
        - name: wabrez-custom-model
          path: ../deployment/chat-model.yaml
      endpoints:
        - name: wabrez-custom-endpoint
          path: ../deployment/chat-endpoint.yaml
          environment: wabrez-custom-env
          model: wabrez-custom-model
          deployment:
            name: wabrez-custom-deployment
            path: ../deployment/chat-deployment.yaml
            overrides:
              environment_variables.PRT_CONFIG_OVERRIDE: deployment.subscription_id=${AZURE_SUBSCRIPTION_ID},deployment.resource_group=${AZURE_RESOURCE_GROUP},deployment.workspace_name=${FLOW_WORKSPACE_NAME},deployment.endpoint_name=${FLOW_ENDPOINT_NAME},deployment.deployment_name=${FLOW_DEPLOYMENT_NAME}
